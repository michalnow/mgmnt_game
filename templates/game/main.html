{% extends 'base.html' %}

{% block title %}Game{% endblock %}

{% block content %}
    <div id="game-main">
        Proszę czekać, trwa ładowanie treści...

    </div>
    <form id="csrf">
        {% csrf_token %}
    </form>
{% endblock %}
{% block script %}
<script type="text/javascript">
    function initGame() {
        var xhttp = new XMLHttpRequest();
        var data = "";
        var inputs = document.getElementById("csrf").children;
        for(var itr=0; itr<inputs.length; itr++){
            if(inputs[itr].value != ""){
                if(data != "") data += "&";
                data += inputs[itr].name + "=" + inputs[itr].value;
            }
        }
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("game-main").innerHTML = this.responseText;
           }
        };
        xhttp.open("POST", "{% url 'api-init-game' %}", true);
        xhttp.send(data);
    }

    initGame();

</script>
{% endblock %}